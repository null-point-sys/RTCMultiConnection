<!-- Demo version: 2018.12.11 -->

<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>DevCast</title>
  <meta name="description" content="WebRTC Dashboard including support for canvas drawing, canvas data syncing, video conferencing, screen sharing and video conferencing. Including chat and file sharing.">

  <link rel="shortcut icon" href="/demos/logo.png">
  <link rel="stylesheet" type="text/css" href="/demos/css/emojionearea.min.css">

  <script src="/demos/js/jquery.min.js"></script>
  <link href="/demos/css/bootstrap.min.css" rel="stylesheet">
  <script src="/node_modules/webrtc-adapter/out/adapter.js"></script>
  <script src="/dist/RTCMultiConnection.min.js"></script>
  <script src="/socket.io/socket.io.js"></script>
  <script src="/node_modules/fbr/FileBufferReader.js"></script>

  <script src="/node_modules/canvas-designer/dev/webrtc-handler.js"></script>
  
  <script src="/node_modules/canvas-designer/canvas-designer-widget.js"></script>
  <script src="/demos/js/emojionearea.min.js"></script>
  <!-- <script src="/node_modules/multistreamsmixer/MultiStreamsMixer.js"></script> -->

<style type="text/css">
html, body, section, ul, li, nav, a, h1, h2 {
    padding: 0;
    margin: 0;
    outline: none;
    text-shadow: none;
    box-shadow: none;
    border-radius: 0;
    text-decoration: none;
}

body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
    font-size: 17px;
    line-height: 1.5em;
}

input[disabled], button[disabled] {
  background: transparent!important;
  color: #dcd7d7!important;
  border: 1px solid #dcd7d7!important;
  cursor: not-allowed!important;
  text-shadow: none!important;
  box-shadow: none!important;
  text-decoration: none!important;
  outline: none!important;
}
  
@media only screen and (max-width: 400px) {
    #widget-container{
      display: none
    }
    .video1{
      width: 100%
    }
}
@media only screen and (min-width: 401px) {
  .chat{
     position: absolute;
  }
  .video1{
      width: 20%
    }
}  
</style>
</head>
<body>
<style>
.extra-controls {
    position: absolute;
    right: 21%;
}

#btn-comments {
  color: red;
  margin-top: 5px;
  font-size: 24px;
  text-shadow: 1px 1px white;
}

#other-videos {
    margin-top: 5px;
}

#other-videos video {
    width: 45%;
    margin: 5px;
    border: 1px solid black;
    padding: 1px;
    border-radius: 3px;
}

#txt-chat-message {
    width: 100%;
    resize: vertical;
    margin: 5px;
    margin-right: 0;
    min-height: 30px;
}

#btn-chat-message {
    margin: 5px;
}

#conversation-panel {
    margin-bottom: 20px;
    text-align: left;
    max-height: 200px;
    overflow: auto;
    border-top: 1px solid #E5E5E5;
    width: 106%;
}

#conversation-panel .message {
    border-bottom: 1px solid #E5E5E5;
    padding: 5px 10px;
}

#conversation-panel .message img, #conversation-panel .message video, #conversation-panel .message iframe {
    max-width: 100%;
}

#main-video {
    width: 100%;
    margin-top: -9px;
    border-bottom: 1px solid #121010;
    padding-bottom: 1px;
}

hr {
    height: 1px;
    border: 0;
    background: #E5E5E5;
}

#btn-attach-file {
    width: 25px;
    vertical-align: middle;
    cursor: pointer;
    display: none;
}

#btn-share-screen {
    width: 25px;
    vertical-align: middle;
    cursor: pointer;
    display: none;
}

.checkmark {
    display:none;
    width: 15px;
    vertical-align: middle;
}

#screen-viewer {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 9999999999999;
    display: none;
}
</style>

<article>

<div id="widget-container" style="position: fixed;bottom: 0;right: 0;left: 20%;height: 100%; border-top:0; border-bottom: 0;"></div>
<video id="screen-viewer" controls playsinline autoplay></video>

<div class="video1" style="height: 100%; position: absolute;left:0;">
    <!-- <video id="main-video" controls playsinline autoplay></video>
    <div id="other-videos"></div> -->
    <h3>DevCast</h3>
    <div style="padding: 5px 10px;">
        <div id="onUserStatusChanged"></div>
    </div>

    <div class="chat" style="margin-top: 20px; bottom: 0;background: white; padding-bottom: 20px; width: 94%">
        <div id="conversation-panel"></div>
        <div id="key-press" style="text-align: right; display: none; font-size: 11px;">
            <span style="vertical-align: middle;"></span>
            <img src="https://www.webrtc-experiment.com/images/key-press.gif" style="height: 12px; vertical-align: middle;">
        </div>
        <textarea id="txt-chat-message"></textarea>
        <button class="btn btn-primary" id="btn-chat-message" disabled>Send</button>
        <img id="btn-attach-file" src="https://www.webrtc-experiment.com/images/attach-file.png" title="Attach a File">
        <img id="btn-share-screen" src="https://www.webrtc-experiment.com/images/share-screen.png" title="Share Your Screen">
    </div>

    <canvas id="temp-stream-canvas" style="display: none;"></canvas>
</div>
</article>

<script>
   // var _0xf923=["\x20","\x72\x65\x70\x6C\x61\x63\x65","\x73\x65\x61\x72\x63\x68","\x6C\x6F\x63\x61\x74\x69\x6F\x6E","\x73\x75\x62\x73\x74\x72\x69\x6E\x67","\x65\x78\x65\x63","\x70\x61\x72\x61\x6D\x73","\x73\x6F\x63\x6B\x65\x74\x55\x52\x4C","\x2F","\x75\x73\x65\x72\x46\x75\x6C\x6C\x4E\x61\x6D\x65","\x65\x78\x74\x72\x61","\x70\x75\x62\x6C\x69\x63\x52\x6F\x6F\x6D\x49\x64\x65\x6E\x74\x69\x66\x69\x65\x72","\x73\x6F\x63\x6B\x65\x74\x4D\x65\x73\x73\x61\x67\x65\x45\x76\x65\x6E\x74","\x63\x61\x6E\x76\x61\x73\x2D\x64\x61\x73\x68\x62\x6F\x61\x72\x64\x2D\x64\x65\x6D\x6F","\x61\x75\x74\x6F\x43\x6C\x6F\x73\x65\x45\x6E\x74\x69\x72\x65\x53\x65\x73\x73\x69\x6F\x6E","\x6D\x61\x78\x50\x61\x72\x74\x69\x63\x69\x70\x61\x6E\x74\x73\x41\x6C\x6C\x6F\x77\x65\x64","\x64\x6F\x6E\x74\x43\x61\x70\x74\x75\x72\x65\x55\x73\x65\x72\x4D\x65\x64\x69\x61","\x77\x69\x64\x67\x65\x74\x48\x74\x6D\x6C\x55\x52\x4C","\x2F\x6E\x6F\x64\x65\x5F\x6D\x6F\x64\x75\x6C\x65\x73\x2F\x63\x61\x6E\x76\x61\x73\x2D\x64\x65\x73\x69\x67\x6E\x65\x72\x2F\x77\x69\x64\x67\x65\x74\x2E\x68\x74\x6D\x6C","\x77\x69\x64\x67\x65\x74\x4A\x73\x55\x52\x4C","\x2F\x6E\x6F\x64\x65\x5F\x6D\x6F\x64\x75\x6C\x65\x73\x2F\x63\x61\x6E\x76\x61\x73\x2D\x64\x65\x73\x69\x67\x6E\x65\x72\x2F\x77\x69\x64\x67\x65\x74\x2E\x6D\x69\x6E\x2E\x6A\x73","\x73\x65\x6E\x64","\x61\x64\x64\x53\x79\x6E\x63\x4C\x69\x73\x74\x65\x6E\x65\x72","\x70\x65\x6E\x63\x69\x6C","\x73\x65\x74\x53\x65\x6C\x65\x63\x74\x65\x64","\x73\x65\x74\x54\x6F\x6F\x6C\x73","\x63\x68\x75\x6E\x6B\x53\x69\x7A\x65","\x65\x6E\x61\x62\x6C\x65\x46\x69\x6C\x65\x53\x68\x61\x72\x69\x6E\x67","\x73\x65\x73\x73\x69\x6F\x6E","\x6D\x61\x6E\x64\x61\x74\x6F\x72\x79","\x73\x64\x70\x43\x6F\x6E\x73\x74\x72\x61\x69\x6E\x74\x73","\x6F\x6E\x55\x73\x65\x72\x53\x74\x61\x74\x75\x73\x43\x68\x61\x6E\x67\x65\x64","\x67\x65\x74\x45\x6C\x65\x6D\x65\x6E\x74\x42\x79\x49\x64","\x70\x75\x73\x68","\x66\x6F\x72\x45\x61\x63\x68","\x67\x65\x74\x41\x6C\x6C\x50\x61\x72\x74\x69\x63\x69\x70\x61\x6E\x74\x73","\x6C\x65\x6E\x67\x74\x68","\x53\x6F\x6C\x6F\x20\x74\x75","\x63\x6F\x6E\x63\x61\x74","\x54\x75","\x69\x6E\x6E\x65\x72\x48\x54\x4D\x4C","\x3C\x62\x3E\x55\x73\x75\x61\x72\x69\x6F\x73\x20\x61\x63\x74\x69\x76\x6F\x73\x3A\x3C\x2F\x62\x3E\x20","\x2C\x20","\x6A\x6F\x69\x6E","\x6F\x6E\x6F\x70\x65\x6E","\x70\x6F\x69\x6E\x74\x73\x4C\x65\x6E\x67\x74\x68","\x70\x6C\x7A\x2D\x73\x79\x6E\x63\x2D\x70\x6F\x69\x6E\x74\x73","\x64\x69\x73\x61\x62\x6C\x65\x64","\x62\x74\x6E\x2D\x63\x68\x61\x74\x2D\x6D\x65\x73\x73\x61\x67\x65","\x64\x69\x73\x70\x6C\x61\x79","\x73\x74\x79\x6C\x65","\x62\x74\x6E\x2D\x61\x74\x74\x61\x63\x68\x2D\x66\x69\x6C\x65","\x69\x6E\x6C\x69\x6E\x65\x2D\x62\x6C\x6F\x63\x6B","\x62\x74\x6E\x2D\x73\x68\x61\x72\x65\x2D\x73\x63\x72\x65\x65\x6E","\x6F\x6E\x63\x6C\x6F\x73\x65","\x6F\x6E\x65\x72\x72\x6F\x72","\x6F\x6E\x6C\x65\x61\x76\x65","\x6F\x6E\x6D\x65\x73\x73\x61\x67\x65","\x73\x68\x6F\x77\x4D\x61\x69\x6E\x56\x69\x64\x65\x6F","\x64\x61\x74\x61","\x74\x6F\x70","\x6F\x66\x66\x73\x65\x74","\x23\x77\x69\x64\x67\x65\x74\x2D\x63\x6F\x6E\x74\x61\x69\x6E\x65\x72","\x6C\x65\x66\x74","\x77\x69\x64\x74\x68","\x68\x65\x69\x67\x68\x74","\x63\x73\x73","\x23\x73\x63\x72\x65\x65\x6E\x2D\x76\x69\x65\x77\x65\x72","\x73\x68\x6F\x77","\x68\x69\x64\x65\x4D\x61\x69\x6E\x56\x69\x64\x65\x6F","\x68\x69\x64\x65","\x74\x79\x70\x69\x6E\x67","\x20\x69\x73\x20\x74\x79\x70\x69\x6E\x67","\x68\x74\x6D\x6C","\x73\x70\x61\x6E","\x66\x69\x6E\x64","\x23\x6B\x65\x79\x2D\x70\x72\x65\x73\x73","","\x63\x68\x61\x74\x4D\x65\x73\x73\x61\x67\x65","\x63\x68\x65\x63\x6B\x6D\x61\x72\x6B","\x72\x65\x63\x65\x69\x76\x65\x64","\x63\x68\x65\x63\x6B\x6D\x61\x72\x6B\x5F\x69\x64","\x69\x6E\x6C\x69\x6E\x65","\x73\x79\x6E\x63","\x73\x79\x6E\x63\x44\x61\x74\x61","\x6F\x6E\x73\x74\x72\x65\x61\x6D","\x61\x74\x74\x61\x63\x68\x53\x74\x72\x65\x61\x6D\x73","\x69\x73\x53\x63\x72\x65\x65\x6E","\x73\x74\x72\x65\x61\x6D","\x63\x61\x6E\x76\x61\x73\x53\x74\x72\x65\x61\x6D","\x73\x72\x63\x4F\x62\x6A\x65\x63\x74","\x67\x65\x74","\x72\x6F\x6F\x6D\x4F\x77\x6E\x65\x72","\x6D\x61\x69\x6E\x2D\x76\x69\x64\x65\x6F","\x64\x61\x74\x61\x2D\x73\x74\x72\x65\x61\x6D\x69\x64","\x73\x74\x72\x65\x61\x6D\x69\x64","\x73\x65\x74\x41\x74\x74\x72\x69\x62\x75\x74\x65","\x74\x79\x70\x65","\x6C\x6F\x63\x61\x6C","\x6D\x75\x74\x65\x64","\x76\x6F\x6C\x75\x6D\x65","\x23\x6D\x61\x69\x6E\x2D\x76\x69\x64\x65\x6F","\x63\x6F\x6E\x74\x72\x6F\x6C\x73","\x6D\x65\x64\x69\x61\x45\x6C\x65\x6D\x65\x6E\x74","\x23\x6F\x74\x68\x65\x72\x2D\x76\x69\x64\x65\x6F\x73","\x71\x75\x65\x72\x79\x53\x65\x6C\x65\x63\x74\x6F\x72","\x61\x70\x70\x65\x6E\x64\x43\x68\x69\x6C\x64","\x6F\x6E\x73\x74\x72\x65\x61\x6D\x65\x6E\x64\x65\x64","\x76\x69\x64\x65\x6F\x5B\x64\x61\x74\x61\x2D\x73\x74\x72\x65\x61\x6D\x69\x64\x3D\x22","\x22\x5D","\x72\x65\x6D\x6F\x76\x65\x43\x68\x69\x6C\x64","\x70\x61\x72\x65\x6E\x74\x4E\x6F\x64\x65","\x6E\x6F\x6E\x65","\x63\x6F\x6E\x76\x65\x72\x73\x61\x74\x69\x6F\x6E\x2D\x70\x61\x6E\x65\x6C","\x64\x69\x76","\x63\x72\x65\x61\x74\x65\x45\x6C\x65\x6D\x65\x6E\x74","\x63\x6C\x61\x73\x73\x4E\x61\x6D\x65","\x6D\x65\x73\x73\x61\x67\x65","\x3C\x62\x3E","\x75\x73\x65\x72\x69\x64","\x3A\x3C\x2F\x62\x3E\x3C\x62\x72\x3E","\x3C\x62\x3E\x59\x6F\x75\x3A\x3C\x2F\x62\x3E\x20\x3C\x69\x6D\x67\x20\x63\x6C\x61\x73\x73\x3D\x22\x63\x68\x65\x63\x6B\x6D\x61\x72\x6B\x22\x20\x69\x64\x3D\x22","\x22\x20\x74\x69\x74\x6C\x65\x3D\x22\x52\x65\x63\x65\x69\x76\x65\x64\x22\x20\x73\x72\x63\x3D\x22\x68\x74\x74\x70\x73\x3A\x2F\x2F\x77\x77\x77\x2E\x77\x65\x62\x72\x74\x63\x2D\x65\x78\x70\x65\x72\x69\x6D\x65\x6E\x74\x2E\x63\x6F\x6D\x2F\x69\x6D\x61\x67\x65\x73\x2F\x63\x68\x65\x63\x6B\x6D\x61\x72\x6B\x2E\x70\x6E\x67\x22\x3E\x3C\x62\x72\x3E","\x62\x61\x63\x6B\x67\x72\x6F\x75\x6E\x64","\x23\x63\x62\x66\x66\x63\x62","\x73\x63\x72\x6F\x6C\x6C\x54\x6F\x70","\x63\x6C\x69\x65\x6E\x74\x48\x65\x69\x67\x68\x74","\x73\x63\x72\x6F\x6C\x6C\x48\x65\x69\x67\x68\x74","\x62\x6F\x74\x74\x6F\x6D","\x63\x6C\x69\x63\x6B","\x2E\x65\x6D\x6F\x6A\x69\x6F\x6E\x65\x61\x72\x65\x61\x2D\x62\x75\x74\x74\x6F\x6E\x2D\x63\x6C\x6F\x73\x65","\x62\x69\x6E\x64","\x75\x6E\x62\x69\x6E\x64","\x2E\x65\x6D\x6F\x6A\x69\x6F\x6E\x65\x61\x72\x65\x61\x2D\x63\x61\x74\x65\x67\x6F\x72\x79","\x2E\x65\x6D\x6F\x6A\x69\x6F\x6E\x65\x61\x72\x65\x61\x2D\x65\x64\x69\x74\x6F\x72","\x65\x6D\x6F\x6A\x69\x6F\x6E\x65\x41\x72\x65\x61","\x23\x74\x78\x74\x2D\x63\x68\x61\x74\x2D\x6D\x65\x73\x73\x61\x67\x65","\x6F\x6E\x6B\x65\x79\x75\x70","\x6B\x65\x79\x43\x6F\x64\x65","\x77\x68\x69\x63\x68","\x23\x62\x74\x6E\x2D\x63\x68\x61\x74\x2D\x6D\x65\x73\x73\x61\x67\x65","\x6F\x6E\x63\x6C\x69\x63\x6B","\x74\x6F\x6B\x65\x6E","\x75\x73\x65\x72\x49\x6E\x64\x65\x78","\x73\x65\x6C\x65\x63\x74\x53\x69\x6E\x67\x6C\x65\x46\x69\x6C\x65","\x75\x72\x6C","\x63\x72\x65\x61\x74\x65\x4F\x62\x6A\x65\x63\x74\x55\x52\x4C","\x3C\x61\x20\x68\x72\x65\x66\x3D\x22","\x22\x20\x74\x61\x72\x67\x65\x74\x3D\x22\x5F\x62\x6C\x61\x6E\x6B\x22\x20\x64\x6F\x77\x6E\x6C\x6F\x61\x64\x3D\x22","\x6E\x61\x6D\x65","\x22\x3E\x44\x6F\x77\x6E\x6C\x6F\x61\x64\x3A\x20\x3C\x62\x3E","\x3C\x2F\x62\x3E\x3C\x2F\x61\x3E","\x6D\x61\x74\x63\x68","\x3C\x62\x72\x3E\x3C\x69\x6D\x67\x20\x63\x72\x6F\x73\x73\x4F\x72\x69\x67\x69\x6E\x3D\x22\x61\x6E\x6F\x6E\x79\x6D\x6F\x75\x73\x22\x20\x73\x72\x63\x3D\x22","\x22\x3E","\x3C\x62\x72\x3E\x3C\x61\x75\x64\x69\x6F\x20\x73\x72\x63\x3D\x22","\x22\x20\x63\x6F\x6E\x74\x72\x6F\x6C\x73\x3E\x3C\x2F\x61\x75\x64\x69\x6F\x3E","\x3C\x69\x66\x72\x61\x6D\x65\x20\x63\x6C\x61\x73\x73\x3D\x22\x69\x6E\x6C\x69\x6E\x65\x2D\x69\x66\x72\x61\x6D\x65\x22\x20\x73\x72\x63\x3D\x22","\x22\x3E\x3C\x2F\x69\x66\x72\x61\x6D\x65\x3E\x3C\x2F\x61\x3E","\x70\x65\x65\x72\x73","\x6F\x6E\x46\x69\x6C\x65\x45\x6E\x64","\x75\x75\x69\x64","\x3C\x62\x3E\x59\x6F\x75\x3A\x3C\x2F\x62\x3E\x3C\x62\x72\x3E","\x61\x75\x74\x6F\x53\x61\x76\x65\x54\x6F\x44\x69\x73\x6B","\x6F\x6E\x46\x69\x6C\x65\x50\x72\x6F\x67\x72\x65\x73\x73","\x76\x61\x6C\x75\x65","\x70\x72\x6F\x67\x72\x65\x73\x73","\x63\x75\x72\x72\x65\x6E\x74\x50\x6F\x73\x69\x74\x69\x6F\x6E","\x6D\x61\x78\x43\x68\x75\x6E\x6B\x73","\x6D\x61\x78","\x6C\x61\x62\x65\x6C","\x6F\x6E\x46\x69\x6C\x65\x53\x74\x61\x72\x74","\x72\x65\x6D\x6F\x74\x65\x55\x73\x65\x72\x49\x64","\x70\x65\x65\x72\x73\x42\x61\x63\x6B\x75\x70","\x3C\x62\x3E\x59\x6F\x75\x20\x28\x74\x6F\x3A\x20","\x29\x3A\x3C\x2F\x62\x3E\x3C\x62\x72\x3E\x3C\x6C\x61\x62\x65\x6C\x3E\x30\x25\x3C\x2F\x6C\x61\x62\x65\x6C\x3E\x20\x3C\x70\x72\x6F\x67\x72\x65\x73\x73\x3E\x3C\x2F\x70\x72\x6F\x67\x72\x65\x73\x73\x3E","\x3A\x3C\x2F\x62\x3E\x3C\x62\x72\x3E\x3C\x6C\x61\x62\x65\x6C\x3E\x30\x25\x3C\x2F\x6C\x61\x62\x65\x6C\x3E\x20\x3C\x70\x72\x6F\x67\x72\x65\x73\x73\x3E\x3C\x2F\x70\x72\x6F\x67\x72\x65\x73\x73\x3E","\x74\x69\x74\x6C\x65","\x70\x6F\x73\x69\x74\x69\x6F\x6E","\x2E","\x73\x70\x6C\x69\x74","\x74\x6F\x46\x69\x78\x65\x64","\x25","\x70\x61\x73\x73\x77\x6F\x72\x64","\x77\x69\x64\x67\x65\x74\x2D\x63\x6F\x6E\x74\x61\x69\x6E\x65\x72","\x6F\x70\x65\x6E","\x74\x72\x75\x65","\x74\x65\x6D\x70\x2D\x73\x74\x72\x65\x61\x6D\x2D\x63\x61\x6E\x76\x61\x73","\x63\x61\x70\x74\x75\x72\x65\x53\x74\x72\x65\x61\x6D","\x69\x64","\x74\x65\x6D\x70\x53\x74\x72\x65\x61\x6D","\x73\x65\x73\x73\x69\x6F\x6E\x69\x64","\x52\x4F\x4F\x4D\x5F\x4E\x4F\x54\x5F\x41\x56\x41\x49\x4C\x41\x42\x4C\x45","\x65\x72\x72\x6F\x72\x73","\x53\x6F\x6D\x65\x6F\x6E\x65\x20\x61\x6C\x72\x65\x61\x64\x79\x20\x63\x72\x65\x61\x74\x65\x64\x20\x74\x68\x69\x73\x20\x72\x6F\x6F\x6D\x2E\x20\x50\x6C\x65\x61\x73\x65\x20\x65\x69\x74\x68\x65\x72\x20\x6A\x6F\x69\x6E\x20\x6F\x72\x20\x63\x72\x65\x61\x74\x65\x20\x61\x20\x73\x65\x70\x61\x72\x61\x74\x65\x20\x72\x6F\x6F\x6D\x2E","\x64\x69\x73\x63\x6F\x6E\x6E\x65\x63\x74","\x72\x65\x6C\x6F\x61\x64","\x6F\x6E","\x73\x6F\x63\x6B\x65\x74","\x45\x6C\x20\x6D\x6F\x64\x65\x72\x61\x64\x6F\x72\x20\x64\x65\x20\x65\x73\x74\x61\x20\x73\x61\x6C\x61\x20\x6E\x6F\x20\x73\x65\x20\x65\x6E\x63\x75\x65\x6E\x74\x72\x61\x20\x65\x6E\x20\x6C\xED\x6E\x65\x61\x2C\x20\x65\x73\x63\x72\xED\x62\x65\x6C\x65\x20\x61\x20","\x6D\x6F\x64\x65\x72\x61\x64\x6F\x72","\x20\x70\x61\x72\x61\x20\x63\x6F\x6E\x63\x72\x65\x74\x61\x72\x20\x6F\x20\x73\x6F\x6C\x69\x63\x69\x74\x61\x72\x20\x75\x6E\x61\x20\x70\x72\x65\x73\x65\x6E\x74\x61\x63\x69\xF3\x6E\x2E\x20\x55\x6E\x61\x20\x76\x65\x7A\x20\x74\x65\x20\x6E\x6F\x74\x69\x66\x69\x71\x75\x65\x20\x71\x75\x65\x20\x68\x61\x20\x69\x6E\x67\x72\x65\x73\x61\x64\x6F\x20\x61\x20\x6C\x61\x20\x73\x65\x73\x69\xF3\x6E\x20\x72\x65\x66\x72\x65\x73\x63\x61\x20\x65\x73\x74\x61\x20\x70\xE1\x67\x69\x6E\x61","\x52\x4F\x4F\x4D\x5F\x46\x55\x4C\x4C","\x52\x6F\x6F\x6D\x20\x69\x73\x20\x66\x75\x6C\x6C\x2E","\x49\x4E\x56\x41\x4C\x49\x44\x5F\x50\x41\x53\x53\x57\x4F\x52\x44","\x50\x6C\x65\x61\x73\x65\x20\x65\x6E\x74\x65\x72\x20\x72\x6F\x6F\x6D\x20\x70\x61\x73\x73\x77\x6F\x72\x64\x2E","\x49\x6E\x76\x61\x6C\x69\x64\x20\x70\x61\x73\x73\x77\x6F\x72\x64\x2E","\x61\x70\x70\x65\x6E\x64\x54\x6F","\x65\x6E\x64\x65\x64","\x61\x64\x64\x45\x76\x65\x6E\x74\x4C\x69\x73\x74\x65\x6E\x65\x72","\x69\x6E\x61\x63\x74\x69\x76\x65","\x67\x65\x74\x54\x72\x61\x63\x6B\x73","\x72\x65\x61\x64\x79\x53\x74\x61\x74\x65","\x43\x61\x6E\x20\x6E\x6F\x74\x20\x72\x65\x70\x6C\x61\x63\x65\x20\x61\x6E\x20\x22\x65\x6E\x64\x65\x64\x22\x20\x74\x72\x61\x63\x6B\x2E\x20\x74\x72\x61\x63\x6B\x2E\x72\x65\x61\x64\x79\x53\x74\x61\x74\x65\x3A\x20","\x70\x65\x65\x72","\x67\x65\x74\x53\x65\x6E\x64\x65\x72\x73","\x74\x72\x61\x63\x6B","\x72\x65\x70\x6C\x61\x63\x65\x54\x72\x61\x63\x6B","\x6B\x69\x6E\x64","\x76\x69\x64\x65\x6F","\x23\x62\x74\x6E\x2D\x73\x68\x61\x72\x65\x2D\x73\x63\x72\x65\x65\x6E","\x6C\x69\x76\x65","\x53\x63\x72\x65\x65\x6E\x20\x73\x68\x61\x72\x69\x6E\x67\x20\x69\x73\x20\x6E\x6F\x74\x20\x65\x6E\x61\x62\x6C\x65\x64\x2E","\x67\x65\x74\x44\x69\x73\x70\x6C\x61\x79\x4D\x65\x64\x69\x61","\x6D\x65\x64\x69\x61\x44\x65\x76\x69\x63\x65\x73","\x50\x6C\x65\x61\x73\x65\x20\x6D\x61\x6B\x65\x20\x73\x75\x72\x65\x20\x74\x6F\x20\x75\x73\x65\x20\x45\x64\x67\x65\x20\x31\x37\x20\x6F\x72\x20\x68\x69\x67\x68\x65\x72\x2E","\x74\x68\x65\x6E","\x67\x65\x74\x44\x69\x73\x70\x6C\x61\x79\x4D\x65\x64\x69\x61\x20\x41\x50\x49\x20\x69\x73\x20\x6E\x6F\x74\x20\x61\x76\x61\x69\x6C\x61\x62\x6C\x65\x20\x69\x6E\x20\x74\x68\x69\x73\x20\x62\x72\x6F\x77\x73\x65\x72\x2E"];(function(){var _0x5db2x1={},_0x5db2x2=/([^&=]+)=?([^&]*)/g;function _0x5db2x3(_0x5db2x4){return decodeURIComponent(_0x5db2x4[_0xf923[1]](/\+/g,_0xf923[0]))}var _0x5db2x5,_0x5db2x6=window[_0xf923[3]][_0xf923[2]];while(_0x5db2x5= _0x5db2x2[_0xf923[5]](_0x5db2x6[_0xf923[4]](1))){_0x5db2x1[_0x5db2x3(_0x5db2x5[1])]= _0x5db2x3(_0x5db2x5[2])};window[_0xf923[6]]= _0x5db2x1})();var connection= new RTCMultiConnection();connection[_0xf923[7]]= _0xf923[8];connection[_0xf923[10]][_0xf923[9]]= params[_0xf923[9]];connection[_0xf923[11]]= params[_0xf923[11]];connection[_0xf923[12]]= _0xf923[13];connection[_0xf923[14]]= true;connection[_0xf923[15]]= 1000;connection[_0xf923[16]]= true;var designer= new CanvasDesigner();designer[_0xf923[17]]= _0xf923[18];designer[_0xf923[19]]= _0xf923[20];designer[_0xf923[22]](function(_0x5db2x9){connection[_0xf923[21]](_0x5db2x9)});designer[_0xf923[24]](_0xf923[23]);designer[_0xf923[25]]({pencil:true,text:true,image:true,pdf:true,eraser:true,line:true,arrow:true,dragSingle:true,dragMultiple:true,arc:true,rectangle:true,quadratic:false,bezier:true,marker:true,zoom:false,lineWidth:false,colorsPicker:false,extraOptions:false,code:false,undo:true});connection[_0xf923[26]]= 16000;connection[_0xf923[27]]= true;connection[_0xf923[28]]= {audio:true,video:true,data:true};connection[_0xf923[30]][_0xf923[29]]= {OfferToReceiveAudio:true,OfferToReceiveVideo:true};connection[_0xf923[31]]= function(_0x5db2xa){var _0x5db2xb=document[_0xf923[32]](_0xf923[31]);var _0x5db2xc=[];connection[_0xf923[35]]()[_0xf923[34]](function(_0x5db2xd){_0x5db2xc[_0xf923[33]](getFullName(_0x5db2xd))});if(!_0x5db2xc[_0xf923[36]]){_0x5db2xc= [_0xf923[37]]}else {_0x5db2xc= [connection[_0xf923[10]][_0xf923[9]]|| _0xf923[39]][_0xf923[38]](_0x5db2xc)};_0x5db2xb[_0xf923[40]]= _0xf923[41]+ _0x5db2xc[_0xf923[43]](_0xf923[42])};connection[_0xf923[44]]= function(_0x5db2xa){connection[_0xf923[31]](_0x5db2xa);if(designer[_0xf923[45]]<= 0){setTimeout(function(){connection[_0xf923[21]](_0xf923[46])},1000)};document[_0xf923[32]](_0xf923[48])[_0xf923[47]]= false;document[_0xf923[32]](_0xf923[51])[_0xf923[50]][_0xf923[49]]= _0xf923[52];document[_0xf923[32]](_0xf923[53])[_0xf923[50]][_0xf923[49]]= _0xf923[52]};connection[_0xf923[54]]= connection[_0xf923[55]]= connection[_0xf923[56]]= function(_0x5db2xa){connection[_0xf923[31]](_0x5db2xa)};connection[_0xf923[57]]= function(_0x5db2xa){if(_0x5db2xa[_0xf923[59]][_0xf923[58]]){$(_0xf923[67])[_0xf923[66]]({top:$(_0xf923[62])[_0xf923[61]]()[_0xf923[60]],left:$(_0xf923[62])[_0xf923[61]]()[_0xf923[63]],width:$(_0xf923[62])[_0xf923[64]](),height:$(_0xf923[62])[_0xf923[65]]()});$(_0xf923[67])[_0xf923[68]]();return};if(_0x5db2xa[_0xf923[59]][_0xf923[69]]){$(_0xf923[67])[_0xf923[70]]();return};if(_0x5db2xa[_0xf923[59]][_0xf923[71]]=== true){$(_0xf923[76])[_0xf923[68]]()[_0xf923[75]](_0xf923[74])[_0xf923[73]](_0x5db2xa[_0xf923[10]][_0xf923[9]]+ _0xf923[72]);return};if(_0x5db2xa[_0xf923[59]][_0xf923[71]]=== false){$(_0xf923[76])[_0xf923[70]]()[_0xf923[75]](_0xf923[74])[_0xf923[73]](_0xf923[77]);return};if(_0x5db2xa[_0xf923[59]][_0xf923[78]]){appendChatMessage(_0x5db2xa);return};if(_0x5db2xa[_0xf923[59]][_0xf923[79]]=== _0xf923[80]){var _0x5db2xe=document[_0xf923[32]](_0x5db2xa[_0xf923[59]][_0xf923[81]]);if(_0x5db2xe){_0x5db2xe[_0xf923[50]][_0xf923[49]]= _0xf923[82]};return};if(_0x5db2xa[_0xf923[59]]=== _0xf923[46]){designer[_0xf923[83]]();return};designer[_0xf923[84]](_0x5db2xa[_0xf923[59]])};connection[_0xf923[85]]= function(_0x5db2xa){var _0x5db2xf=connection[_0xf923[86]][0];if(_0x5db2xa[_0xf923[88]][_0xf923[87]]&&  !_0x5db2xa[_0xf923[88]][_0xf923[89]]){$(_0xf923[67])[_0xf923[91]](0)[_0xf923[90]]= _0x5db2xa[_0xf923[88]];$(_0xf923[67])[_0xf923[70]]()}else {if(_0x5db2xa[_0xf923[10]][_0xf923[92]]=== true){var _0x5db2x10=document[_0xf923[32]](_0xf923[93]);_0x5db2x10[_0xf923[96]](_0xf923[94],_0x5db2xa[_0xf923[95]]);if(_0x5db2xa[_0xf923[97]]=== _0xf923[98]){_0x5db2x10[_0xf923[99]]= true;_0x5db2x10[_0xf923[100]]= 0};_0x5db2x10[_0xf923[90]]= _0x5db2xa[_0xf923[88]];$(_0xf923[101])[_0xf923[68]]()}else {_0x5db2xa[_0xf923[103]][_0xf923[102]]= false;var _0x5db2x11=document[_0xf923[105]](_0xf923[104]);_0x5db2x11[_0xf923[106]](_0x5db2xa[_0xf923[103]])}};connection[_0xf923[31]](_0x5db2xa)};connection[_0xf923[107]]= function(_0x5db2xa){var _0x5db2x10=document[_0xf923[105]](_0xf923[108]+ _0x5db2xa[_0xf923[95]]+ _0xf923[109]);if(!_0x5db2x10){_0x5db2x10= document[_0xf923[32]](_0x5db2xa[_0xf923[95]]);if(_0x5db2x10){_0x5db2x10[_0xf923[111]][_0xf923[110]](_0x5db2x10);return}};if(_0x5db2x10){_0x5db2x10[_0xf923[90]]= null;_0x5db2x10[_0xf923[50]][_0xf923[49]]= _0xf923[112]}};var conversationPanel=document[_0xf923[32]](_0xf923[113]);function appendChatMessage(_0x5db2xa,_0x5db2x14){var _0x5db2x15=document[_0xf923[115]](_0xf923[114]);_0x5db2x15[_0xf923[116]]= _0xf923[117];if(_0x5db2xa[_0xf923[59]]){_0x5db2x15[_0xf923[40]]= _0xf923[118]+ (_0x5db2xa[_0xf923[10]][_0xf923[9]]|| _0x5db2xa[_0xf923[119]])+ _0xf923[120]+ _0x5db2xa[_0xf923[59]][_0xf923[78]];if(_0x5db2xa[_0xf923[59]][_0xf923[81]]){connection[_0xf923[21]]({checkmark:_0xf923[80],checkmark_id:_0x5db2xa[_0xf923[59]][_0xf923[81]]})}}else {_0x5db2x15[_0xf923[40]]= _0xf923[121]+ _0x5db2x14+ _0xf923[122]+ _0x5db2xa;_0x5db2x15[_0xf923[50]][_0xf923[123]]= _0xf923[124]};conversationPanel[_0xf923[106]](_0x5db2x15);conversationPanel[_0xf923[125]]= conversationPanel[_0xf923[126]];conversationPanel[_0xf923[125]]= conversationPanel[_0xf923[127]]- conversationPanel[_0xf923[125]]}var keyPressTimer;var numberOfKeys=0;$(_0xf923[136])[_0xf923[135]]({pickerPosition:_0xf923[60],filtersPosition:_0xf923[128],tones:false,autocomplete:true,inline:true,hidePickerOnBlur:true,events:{focus:function(){$(_0xf923[133])[_0xf923[132]](_0xf923[129])[_0xf923[131]](_0xf923[129],function(){$(_0xf923[130])[_0xf923[129]]()})},keyup:function(_0x5db2x18){var _0x5db2x19=$(_0xf923[134])[_0xf923[73]]();if(!_0x5db2x19||  !_0x5db2x19[_0xf923[1]](/ /g,_0xf923[77])[_0xf923[36]]){connection[_0xf923[21]]({typing:false})};clearTimeout(keyPressTimer);numberOfKeys++;if(numberOfKeys% 3=== 0){connection[_0xf923[21]]({typing:true})};keyPressTimer= setTimeout(function(){connection[_0xf923[21]]({typing:false})},1200)},blur:function(){connection[_0xf923[21]]({typing:false})}}});window[_0xf923[137]]= function(_0x5db2x18){var _0x5db2x1a=_0x5db2x18[_0xf923[138]]|| _0x5db2x18[_0xf923[139]];if(_0x5db2x1a== 13){$(_0xf923[140])[_0xf923[129]]()}};document[_0xf923[32]](_0xf923[48])[_0xf923[141]]= function(){var _0x5db2x19=$(_0xf923[134])[_0xf923[73]]();$(_0xf923[134])[_0xf923[73]](_0xf923[77]);if(!_0x5db2x19||  !_0x5db2x19[_0xf923[1]](/ /g,_0xf923[77])[_0xf923[36]]){return};var _0x5db2x14=connection[_0xf923[119]]+ connection[_0xf923[142]]();appendChatMessage(_0x5db2x19,_0x5db2x14);connection[_0xf923[21]]({chatMessage:_0x5db2x19,checkmark_id:_0x5db2x14});connection[_0xf923[21]]({typing:false})};var recentFile;document[_0xf923[32]](_0xf923[51])[_0xf923[141]]= function(){var _0x5db2x1c= new FileSelector();_0x5db2x1c[_0xf923[144]](function(_0x5db2x1c){recentFile= _0x5db2x1c;if(connection[_0xf923[35]]()[_0xf923[36]]>= 1){recentFile[_0xf923[143]]= 0;connection[_0xf923[21]](_0x5db2x1c,connection[_0xf923[35]]()[recentFile[_0xf923[143]]])}})};function getFileHTML(_0x5db2x1c){var _0x5db2x1e=_0x5db2x1c[_0xf923[145]]|| URL[_0xf923[146]](_0x5db2x1c);var _0x5db2x1f=_0xf923[147]+ _0x5db2x1e+ _0xf923[148]+ _0x5db2x1c[_0xf923[149]]+ _0xf923[150]+ _0x5db2x1c[_0xf923[149]]+ _0xf923[151];if(_0x5db2x1c[_0xf923[149]][_0xf923[152]](/\.jpg|\.png|\.jpeg|\.gif/gi)){_0x5db2x1f+= _0xf923[153]+ _0x5db2x1e+ _0xf923[154]}else {if(_0x5db2x1c[_0xf923[149]][_0xf923[152]](/\.wav|\.mp3/gi)){_0x5db2x1f+= _0xf923[155]+ _0x5db2x1e+ _0xf923[156]}else {if(_0x5db2x1c[_0xf923[149]][_0xf923[152]](/\.pdf|\.js|\.txt|\.sh/gi)){_0x5db2x1f+= _0xf923[157]+ _0x5db2x1e+ _0xf923[158]}}};return _0x5db2x1f}function getFullName(_0x5db2x21){var _0x5db2x22=_0x5db2x21;if(connection[_0xf923[159]][_0x5db2x21]&& connection[_0xf923[159]][_0x5db2x21][_0xf923[10]][_0xf923[9]]){_0x5db2x22= connection[_0xf923[159]][_0x5db2x21][_0xf923[10]][_0xf923[9]]};return _0x5db2x22}connection[_0xf923[160]]= function(_0x5db2x1c){var _0x5db2x23=getFileHTML(_0x5db2x1c);var _0x5db2x15=progressHelper[_0x5db2x1c[_0xf923[161]]][_0xf923[114]];if(_0x5db2x1c[_0xf923[119]]=== connection[_0xf923[119]]){_0x5db2x15[_0xf923[40]]= _0xf923[162]+ _0x5db2x23;_0x5db2x15[_0xf923[50]][_0xf923[123]]= _0xf923[124];if(recentFile){recentFile[_0xf923[143]]++;var _0x5db2x24=connection[_0xf923[35]]()[recentFile[_0xf923[143]]];if(_0x5db2x24){connection[_0xf923[21]](recentFile,_0x5db2x24)}else {recentFile= null}}else {recentFile= null}}else {_0x5db2x15[_0xf923[40]]= _0xf923[118]+ getFullName(_0x5db2x1c[_0xf923[119]])+ _0xf923[120]+ _0x5db2x23}};connection[_0xf923[163]]= false;var progressHelper={};connection[_0xf923[164]]= function(_0x5db2x26,_0x5db2x27){var _0x5db2x28=progressHelper[_0x5db2x26[_0xf923[161]]];_0x5db2x28[_0xf923[166]][_0xf923[165]]= _0x5db2x26[_0xf923[167]]|| _0x5db2x26[_0xf923[168]]|| _0x5db2x28[_0xf923[166]][_0xf923[169]];updateLabel(_0x5db2x28[_0xf923[166]],_0x5db2x28[_0xf923[170]])};connection[_0xf923[171]]= function(_0x5db2x1c){var _0x5db2x15=document[_0xf923[115]](_0xf923[114]);_0x5db2x15[_0xf923[116]]= _0xf923[117];if(_0x5db2x1c[_0xf923[119]]=== connection[_0xf923[119]]){var _0x5db2x29=_0x5db2x1c[_0xf923[172]];if(connection[_0xf923[173]][_0x5db2x1c[_0xf923[172]]]){_0x5db2x29= connection[_0xf923[173]][_0x5db2x1c[_0xf923[172]]][_0xf923[10]][_0xf923[9]]};_0x5db2x15[_0xf923[40]]= _0xf923[174]+ _0x5db2x29+ _0xf923[175];_0x5db2x15[_0xf923[50]][_0xf923[123]]= _0xf923[124]}else {_0x5db2x15[_0xf923[40]]= _0xf923[118]+ getFullName(_0x5db2x1c[_0xf923[119]])+ _0xf923[176]};_0x5db2x15[_0xf923[177]]= _0x5db2x1c[_0xf923[149]];conversationPanel[_0xf923[106]](_0x5db2x15);progressHelper[_0x5db2x1c[_0xf923[161]]]= {div:_0x5db2x15,progress:_0x5db2x15[_0xf923[105]](_0xf923[166]),label:_0x5db2x15[_0xf923[105]](_0xf923[170])};progressHelper[_0x5db2x1c[_0xf923[161]]][_0xf923[166]][_0xf923[169]]= _0x5db2x1c[_0xf923[168]];conversationPanel[_0xf923[125]]= conversationPanel[_0xf923[126]];conversationPanel[_0xf923[125]]= conversationPanel[_0xf923[127]]- conversationPanel[_0xf923[125]]};function updateLabel(_0x5db2x2b,_0x5db2x2c){if(_0x5db2x2b[_0xf923[178]]==  -1){return};var _0x5db2x2d=+_0x5db2x2b[_0xf923[178]][_0xf923[181]](2)[_0xf923[180]](_0xf923[179])[1]|| 100;_0x5db2x2c[_0xf923[40]]= _0x5db2x2d+ _0xf923[182]}if(!!params[_0xf923[183]]){connection[_0xf923[183]]= params[_0xf923[183]]};designer[_0xf923[207]](document[_0xf923[32]](_0xf923[184]),function(){if(params[_0xf923[185]]=== true|| params[_0xf923[185]]=== _0xf923[186]){var _0x5db2x2e=document[_0xf923[32]](_0xf923[187]);var _0x5db2x2f=_0x5db2x2e[_0xf923[188]]();_0x5db2x2f[_0xf923[87]]= true;_0x5db2x2f[_0xf923[95]]= _0x5db2x2f[_0xf923[189]];_0x5db2x2f[_0xf923[97]]= _0xf923[98];connection[_0xf923[86]][_0xf923[33]](_0x5db2x2f);window[_0xf923[190]]= _0x5db2x2f;connection[_0xf923[10]][_0xf923[92]]= true;connection[_0xf923[185]](params[_0xf923[191]],function(_0x5db2x30,_0x5db2x31,_0x5db2x32){if(_0x5db2x32){if(_0x5db2x32=== connection[_0xf923[193]][_0xf923[192]]){alert(_0xf923[194]);return};alert(_0x5db2x32)};connection[_0xf923[198]][_0xf923[197]](_0xf923[195],function(){location[_0xf923[196]]()})})}else {connection[_0xf923[43]](params[_0xf923[191]],function(_0x5db2x33,_0x5db2x31,_0x5db2x32){if(_0x5db2x32){if(_0x5db2x32=== connection[_0xf923[193]][_0xf923[192]]){alert(_0xf923[199]+ params[_0xf923[200]]+ _0xf923[201]);return};if(_0x5db2x32=== connection[_0xf923[193]][_0xf923[202]]){alert(_0xf923[203]);return};if(_0x5db2x32=== connection[_0xf923[193]][_0xf923[204]]){connection[_0xf923[183]]= prompt(_0xf923[205])|| _0xf923[77];if(!connection[_0xf923[183]][_0xf923[36]]){alert(_0xf923[206]);return};connection[_0xf923[43]](params[_0xf923[191]],function(_0x5db2x33,_0x5db2x31,_0x5db2x32){if(_0x5db2x32){alert(_0x5db2x32)}});return};alert(_0x5db2x32)};connection[_0xf923[198]][_0xf923[197]](_0xf923[195],function(){location[_0xf923[196]]()})})}});function addStreamStopListener(_0x5db2x35,_0x5db2x36){_0x5db2x35[_0xf923[209]](_0xf923[208],function(){_0x5db2x36();_0x5db2x36= function(){}},false);_0x5db2x35[_0xf923[209]](_0xf923[210],function(){_0x5db2x36();_0x5db2x36= function(){}},false);_0x5db2x35[_0xf923[211]]()[_0xf923[34]](function(_0x5db2x37){_0x5db2x37[_0xf923[209]](_0xf923[208],function(){_0x5db2x36();_0x5db2x36= function(){}},false);_0x5db2x37[_0xf923[209]](_0xf923[210],function(){_0x5db2x36();_0x5db2x36= function(){}},false)})}function replaceTrack(_0x5db2x39,_0x5db2x3a){if(!_0x5db2x39){return};if(_0x5db2x39[_0xf923[212]]=== _0xf923[208]){alert(_0xf923[213]+ _0x5db2x39[_0xf923[212]]);return};connection[_0xf923[35]]()[_0xf923[34]](function(_0x5db2xd){var _0x5db2x3b=connection[_0xf923[159]][_0x5db2xd][_0xf923[214]];if(!_0x5db2x3b[_0xf923[215]]){return};var _0x5db2x3c=_0x5db2x39;_0x5db2x3b[_0xf923[215]]()[_0xf923[34]](function(_0x5db2x3d){if(!_0x5db2x3d||  !_0x5db2x3d[_0xf923[216]]){return};if(_0x5db2x3a){if(_0x5db2x3c&& _0x5db2x3d[_0xf923[216]][_0xf923[189]]=== _0x5db2x3a){_0x5db2x3d[_0xf923[217]](_0x5db2x3c);_0x5db2x3c= null};return};if(_0x5db2x3d[_0xf923[216]][_0xf923[189]]!== tempStream[_0xf923[211]]()[0][_0xf923[189]]){return};if(_0x5db2x3d[_0xf923[216]][_0xf923[218]]=== _0xf923[219]&& _0x5db2x3c){_0x5db2x3d[_0xf923[217]](_0x5db2x3c);_0x5db2x3c= null}})})}function replaceScreenTrack(_0x5db2x35){_0x5db2x35[_0xf923[87]]= true;_0x5db2x35[_0xf923[95]]= _0x5db2x35[_0xf923[189]];_0x5db2x35[_0xf923[97]]= _0xf923[98];connection[_0xf923[85]]({stream:_0x5db2x35,type:_0xf923[98],streamid:_0x5db2x35[_0xf923[189]]});var _0x5db2x3a=_0x5db2x35[_0xf923[211]]()[0][_0xf923[189]];addStreamStopListener(_0x5db2x35,function(){connection[_0xf923[21]]({hideMainVideo:true});$(_0xf923[67])[_0xf923[70]]();$(_0xf923[220])[_0xf923[68]]();replaceTrack(tempStream[_0xf923[211]]()[0],_0x5db2x3a)});_0x5db2x35[_0xf923[211]]()[_0xf923[34]](function(_0x5db2x37){if(_0x5db2x37[_0xf923[218]]=== _0xf923[219]&& _0x5db2x37[_0xf923[212]]=== _0xf923[221]){replaceTrack(_0x5db2x37)}});connection[_0xf923[21]]({showMainVideo:true});$(_0xf923[67])[_0xf923[66]]({top:$(_0xf923[62])[_0xf923[61]]()[_0xf923[60]],left:$(_0xf923[62])[_0xf923[61]]()[_0xf923[63]],width:$(_0xf923[62])[_0xf923[64]](),height:$(_0xf923[62])[_0xf923[65]]()});$(_0xf923[67])[_0xf923[68]]()}$(_0xf923[220])[_0xf923[129]](function(){if(!window[_0xf923[190]]){alert(_0xf923[222]);return};$(_0xf923[220])[_0xf923[70]]();if(navigator[_0xf923[224]][_0xf923[223]]){navigator[_0xf923[224]][_0xf923[223]](screen_constraints)[_0xf923[226]]((_0x5db2x35)=>{replaceScreenTrack(_0x5db2x35)},(_0x5db2x32)=>{alert(_0xf923[225])})}else {if(navigator[_0xf923[223]]){navigator[_0xf923[223]](screen_constraints)[_0xf923[226]]((_0x5db2x35)=>{replaceScreenTrack(_0x5db2x35)},(_0x5db2x32)=>{alert(_0xf923[225])})}else {alert(_0xf923[227])}}})
 
  (function() {
    var params = {},
        r = /([^&=]+)=?([^&]*)/g;

    function d(s) {
        return decodeURIComponent(s.replace(/\+/g, ' '));
    }
    var match, search = window.location.search;
    while (match = r.exec(search.substring(1)))
        params[d(match[1])] = d(match[2]);
    window.params = params;
})();

var connection = new RTCMultiConnection();

connection.socketURL = '/';
// connection.socketURL = 'https://rtcmulticonnection.herokuapp.com:443/';

connection.extra.userFullName = params.userFullName;

/// make this room public
connection.publicRoomIdentifier = params.publicRoomIdentifier;

connection.socketMessageEvent = 'canvas-dashboard-demo';

// keep room opened even if owner leaves
connection.autoCloseEntireSession = true;

// https://www.rtcmulticonnection.org/docs/maxParticipantsAllowed/
connection.maxParticipantsAllowed = 1000;
// set value 2 for one-to-one connection
// connection.maxParticipantsAllowed = 2;

  connection.dontCaptureUserMedia = true;
  
// here goes canvas designer
var designer = new CanvasDesigner();

// you can place widget.html anywhere
designer.widgetHtmlURL = '/node_modules/canvas-designer/widget.html';
designer.widgetJsURL = '/node_modules/canvas-designer/widget.min.js'

designer.addSyncListener(function(data) {
    connection.send(data);
});

designer.setSelected('pencil');
if (params.open === true || params.open === 'true') {
designer.setTools({
    pencil: true,
    text: true,
    image: true,
    pdf: true,
    eraser: true,
    line: true,
    arrow: true,
    dragSingle: true,
    dragMultiple: true,
    arc: true,
    rectangle: true,
    quadratic: false,
    bezier: true,
    marker: true,
    zoom: false,
    lineWidth: false,
    colorsPicker: false,
    extraOptions: false,
    code: false,
    undo: true
}); 
} else {
  designer.setTools({
    pencil: true,
    text: true,
    eraser: true,
    line: true,
    arrow: true,
    dragSingle: true,
    dragMultiple: true,
    arc: true,
    rectangle: true,
    quadratic: false,
    bezier: true,
    marker: true,
    zoom: false,
    lineWidth: false,
    colorsPicker: false,
    extraOptions: false,
    code: false,
    undo: true
});  
}
  

// here goes RTCMultiConnection

connection.chunkSize = 16000;
connection.enableFileSharing = true;

connection.session = {
    audio: true,
    video: true,
    data: true
};
connection.sdpConstraints.mandatory = {
    OfferToReceiveAudio: true,
    OfferToReceiveVideo: true
};

connection.onUserStatusChanged = function(event) {
    var infoBar = document.getElementById('onUserStatusChanged');
    var names = [];
    connection.getAllParticipants().forEach(function(pid) {
        names.push(getFullName(pid));
    });

    if (!names.length) {
        names = ['Solo tu'];
    } else {
        names = [connection.extra.userFullName || 'Tu'].concat(names);
    }

    infoBar.innerHTML = '<b>Usuarios activos:</b> ' + names.join(', ');
};

connection.onopen = function(event) {
    connection.onUserStatusChanged(event);

    if (designer.pointsLength <= 0) {
        // make sure that remote user gets all drawings synced.
        setTimeout(function() {
            connection.send('plz-sync-points');
        }, 1000);
    }

    document.getElementById('btn-chat-message').disabled = false;
    document.getElementById('btn-attach-file').style.display = 'inline-block';
    document.getElementById('btn-share-screen').style.display = 'inline-block';

};

connection.onclose = connection.onerror = connection.onleave = function(event) {
    connection.onUserStatusChanged(event);
};

connection.onmessage = function(event) {
    if(event.data.showMainVideo) {
        // $('#main-video').show();
        $('#screen-viewer').css({
            top: $('#widget-container').offset().top,
            left: $('#widget-container').offset().left,
            width: $('#widget-container').width(),
            height: $('#widget-container').height()
        });
        $('#screen-viewer').show();
        return;
    }

    if(event.data.hideMainVideo) {
        // $('#main-video').hide();
        $('#screen-viewer').hide();
        return;
    }

    if(event.data.typing === true) {
        $('#key-press').show().find('span').html(event.extra.userFullName + ' is typing');
        return;
    }

    if(event.data.typing === false) {
        $('#key-press').hide().find('span').html('');
        return;
    }

    if (event.data.chatMessage) {
        appendChatMessage(event);
        return;
    }

    if (event.data.checkmark === 'received') {
        var checkmarkElement = document.getElementById(event.data.checkmark_id);
        if (checkmarkElement) {
            checkmarkElement.style.display = 'inline';
        }
        return;
    }

    if (event.data === 'plz-sync-points') {
        designer.sync();
        return;
    }

    designer.syncData(event.data);
};

// extra code

connection.onstream = function(event) {
    
  var localStream = connection.attachStreams[0];
  //localStream.mute('video');
  
    if (event.stream.isScreen && !event.stream.canvasStream) {
        $('#screen-viewer').get(0).srcObject = event.stream;
        $('#screen-viewer').hide();
    }
    else if (event.extra.roomOwner === true) {
        var video = document.getElementById('main-video');
        video.setAttribute('data-streamid', event.streamid);
        // video.style.display = 'none';
        if(event.type === 'local') {
            video.muted = true;
            video.volume = 0;
        }
        video.srcObject = event.stream;
        $('#main-video').show();
    } else {
        event.mediaElement.controls = false;

        var otherVideos = document.querySelector('#other-videos');
        otherVideos.appendChild(event.mediaElement);
    }

    connection.onUserStatusChanged(event);
};

connection.onstreamended = function(event) {
  
    var video = document.querySelector('video[data-streamid="' + event.streamid + '"]');
    if (!video) {
        video = document.getElementById(event.streamid);
        if (video) {
            video.parentNode.removeChild(video);
            return;
        }
    }
    if (video) {
        video.srcObject = null;
        video.style.display = 'none';
    }
};

var conversationPanel = document.getElementById('conversation-panel');

function appendChatMessage(event, checkmark_id) {
    var div = document.createElement('div');

    div.className = 'message';

    if (event.data) {
        div.innerHTML = '<b>' + (event.extra.userFullName || event.userid) + ':</b><br>' + event.data.chatMessage;

        if (event.data.checkmark_id) {
            connection.send({
                checkmark: 'received',
                checkmark_id: event.data.checkmark_id
            });
        }
    } else {
        div.innerHTML = '<b>You:</b> <img class="checkmark" id="' + checkmark_id + '" title="Received" src="https://www.webrtc-experiment.com/images/checkmark.png"><br>' + event;
        div.style.background = '#cbffcb';
    }

    conversationPanel.appendChild(div);

    conversationPanel.scrollTop = conversationPanel.clientHeight;
    conversationPanel.scrollTop = conversationPanel.scrollHeight - conversationPanel.scrollTop;
}

var keyPressTimer;
var numberOfKeys = 0;
$('#txt-chat-message').emojioneArea({
    pickerPosition: "top",
    filtersPosition: "bottom",
    tones: false,
    autocomplete: true,
    inline: true,
    hidePickerOnBlur: true,
    events: {
        focus: function() {
            $('.emojionearea-category').unbind('click').bind('click', function() {
                $('.emojionearea-button-close').click();
            });
        },
        keyup: function(e) {
            var chatMessage = $('.emojionearea-editor').html();
            if (!chatMessage || !chatMessage.replace(/ /g, '').length) {
                connection.send({
                    typing: false
                });
            }


            clearTimeout(keyPressTimer);
            numberOfKeys++;

            if (numberOfKeys % 3 === 0) {
                connection.send({
                    typing: true
                });
            }

            keyPressTimer = setTimeout(function() {
                connection.send({
                    typing: false
                });
            }, 1200);
        },
        blur: function() {
            // $('#btn-chat-message').click();
            connection.send({
                typing: false
            });
        }
    }
});

window.onkeyup = function(e) {
    var code = e.keyCode || e.which;
    if (code == 13) {
        $('#btn-chat-message').click();
    }
};

document.getElementById('btn-chat-message').onclick = function() {
    var chatMessage = $('.emojionearea-editor').html();
    $('.emojionearea-editor').html('');

    if (!chatMessage || !chatMessage.replace(/ /g, '').length) return;

    var checkmark_id = connection.userid + connection.token();

    appendChatMessage(chatMessage, checkmark_id);

    connection.send({
        chatMessage: chatMessage,
        checkmark_id: checkmark_id
    });

    connection.send({
        typing: false
    });
};

var recentFile;
document.getElementById('btn-attach-file').onclick = function() {
    var file = new FileSelector();
    file.selectSingleFile(function(file) {
        recentFile = file;

        if(connection.getAllParticipants().length >= 1) {
            recentFile.userIndex = 0;
            connection.send(file, connection.getAllParticipants()[recentFile.userIndex]);
        }
    });
};

function getFileHTML(file) {
    var url = file.url || URL.createObjectURL(file);
    var attachment = '<a href="' + url + '" target="_blank" download="' + file.name + '">Download: <b>' + file.name + '</b></a>';
    if (file.name.match(/\.jpg|\.png|\.jpeg|\.gif/gi)) {
        attachment += '<br><img crossOrigin="anonymous" src="' + url + '">';
    } else if (file.name.match(/\.wav|\.mp3/gi)) {
        attachment += '<br><audio src="' + url + '" controls></audio>';
    } else if (file.name.match(/\.pdf|\.js|\.txt|\.sh/gi)) {
        attachment += '<iframe class="inline-iframe" src="' + url + '"></iframe></a>';
    }
    return attachment;
}

function getFullName(userid) {
    var _userFullName = userid;
    if (connection.peers[userid] && connection.peers[userid].extra.userFullName) {
        _userFullName = connection.peers[userid].extra.userFullName;
    }
    return _userFullName;
}

connection.onFileEnd = function(file) {
    var html = getFileHTML(file);
    var div = progressHelper[file.uuid].div;

    if (file.userid === connection.userid) {
        div.innerHTML = '<b>You:</b><br>' + html;
        div.style.background = '#cbffcb';

        if(recentFile) {
            recentFile.userIndex++;
            var nextUserId = connection.getAllParticipants()[recentFile.userIndex];
            if(nextUserId) {
                connection.send(recentFile, nextUserId);
            }
            else {
                recentFile = null;
            }
        }
        else {
            recentFile = null;
        }
    } else {
        div.innerHTML = '<b>' + getFullName(file.userid) + ':</b><br>' + html;
    }
};

// to make sure file-saver dialog is not invoked.
connection.autoSaveToDisk = false;

var progressHelper = {};

connection.onFileProgress = function(chunk, uuid) {
    var helper = progressHelper[chunk.uuid];
    helper.progress.value = chunk.currentPosition || chunk.maxChunks || helper.progress.max;
    updateLabel(helper.progress, helper.label);
};

connection.onFileStart = function(file) {
    var div = document.createElement('div');
    div.className = 'message';

    if (file.userid === connection.userid) {
        var userFullName = file.remoteUserId;
        if(connection.peersBackup[file.remoteUserId]) {
            userFullName = connection.peersBackup[file.remoteUserId].extra.userFullName;
        }

        div.innerHTML = '<b>You (to: ' + userFullName + '):</b><br><label>0%</label> <progress></progress>';
        div.style.background = '#cbffcb';
    } else {
        div.innerHTML = '<b>' + getFullName(file.userid) + ':</b><br><label>0%</label> <progress></progress>';
    }

    div.title = file.name;
    conversationPanel.appendChild(div);
    progressHelper[file.uuid] = {
        div: div,
        progress: div.querySelector('progress'),
        label: div.querySelector('label')
    };
    progressHelper[file.uuid].progress.max = file.maxChunks;

    conversationPanel.scrollTop = conversationPanel.clientHeight;
    conversationPanel.scrollTop = conversationPanel.scrollHeight - conversationPanel.scrollTop;
};

function updateLabel(progress, label) {
    if (progress.position == -1) return;
    var position = +progress.position.toFixed(2).split('.')[1] || 100;
    label.innerHTML = position + '%';
}

if(!!params.password) {
    connection.password = params.password;
}

designer.appendTo(document.getElementById('widget-container'), function() {
       if (params.open === true || params.open === 'true') { 
                
            var tempStreamCanvas = document.getElementById('temp-stream-canvas');
            var tempStream = tempStreamCanvas.captureStream();
            tempStream.isScreen = true;
            tempStream.streamid = tempStream.id;
            tempStream.type = 'local';
            connection.attachStreams.push(tempStream);
            window.tempStream = tempStream;

            connection.extra.roomOwner = true;
            connection.open(params.sessionid, function(isRoomOpened, roomid, error) {
                if (error) {
                    if (error === connection.errors.ROOM_NOT_AVAILABLE) {
                        alert('Someone already created this room. Please either join or create a separate room.');
                        return;
                    }
                    alert(error);
                }

                connection.socket.on('disconnect', function() {
                    location.reload();
                });
            });
    } else {
        connection.join(params.sessionid, function(isRoomJoined, roomid, error) {
            if (error) {
                if (error === connection.errors.ROOM_NOT_AVAILABLE) {
                    alert('El moderador de esta sala no se encuentra en línea, escríbele a ' +params.moderador+ ' para concretar o solicitar una presentación. Una vez te notifique que ha ingresado a la sesión refresca esta página');
                    return;
                }
                if (error === connection.errors.ROOM_FULL) {
                    alert('Room is full.');
                    return;
                }
                if (error === connection.errors.INVALID_PASSWORD) {
                    connection.password = prompt('Please enter room password.') || '';
                    if(!connection.password.length) {
                        alert('Invalid password.');
                        return;
                    }
                    connection.join(params.sessionid, function(isRoomJoined, roomid, error) {
                        if(error) {
                            alert(error);
                        }
                    });
                    return;
                }
                alert(error);
            }

            connection.socket.on('disconnect', function() {
                location.reload();
            });
        });
    } 
});

 function addStreamStopListener(stream, callback) {
    stream.addEventListener('ended', function() {
        callback();
        callback = function() {};
    }, false);

    stream.addEventListener('inactive', function() {
        callback();
        callback = function() {};
    }, false);

    stream.getTracks().forEach(function(track) {
        track.addEventListener('ended', function() {
            callback();
            callback = function() {};
        }, false);

        track.addEventListener('inactive', function() {
            callback();
            callback = function() {};
        }, false);
    });
}

function replaceTrack(videoTrack, screenTrackId) {
    if (!videoTrack) return;
    if (videoTrack.readyState === 'ended') {
        alert('Can not replace an "ended" track. track.readyState: ' + videoTrack.readyState);
        return;
    }
    connection.getAllParticipants().forEach(function(pid) {
        var peer = connection.peers[pid].peer;
        if (!peer.getSenders) return;
        var trackToReplace = videoTrack;
        peer.getSenders().forEach(function(sender) {
            if (!sender || !sender.track) return;
            if(screenTrackId) {
                if(trackToReplace && sender.track.id === screenTrackId) {
                    sender.replaceTrack(trackToReplace);
                    trackToReplace = null;
                }
                return;
            }

            if(sender.track.id !== tempStream.getTracks()[0].id) return;
            if (sender.track.kind === 'video' && trackToReplace) {
                sender.replaceTrack(trackToReplace);
                trackToReplace = null;
            }
        });
    });
}

function replaceScreenTrack(stream) {
    stream.isScreen = true;
    stream.streamid = stream.id;
    stream.type = 'local';

    // connection.attachStreams.push(stream);
    connection.onstream({
        stream: stream,
        type: 'local',
        streamid: stream.id,
        // mediaElement: video
    });

    var screenTrackId = stream.getTracks()[0].id;
    addStreamStopListener(stream, function() {
        connection.send({
            hideMainVideo: true
        });

        // $('#main-video').hide();
        $('#screen-viewer').hide();
        $('#btn-share-screen').show();
        replaceTrack(tempStream.getTracks()[0], screenTrackId);
    });

    stream.getTracks().forEach(function(track) {
        if(track.kind === 'video' && track.readyState === 'live') {
            replaceTrack(track);
        }
    });

    connection.send({
        showMainVideo: true
    });

    // $('#main-video').show();
    $('#screen-viewer').css({
            top: $('#widget-container').offset().top,
            left: $('#widget-container').offset().left,
            width: $('#widget-container').width(),
            height: $('#widget-container').height()
        });
    $('#screen-viewer').show();
}

$('#btn-share-screen').click(function() {
    if(!window.tempStream) {
        alert('Screen sharing is not enabled.');
        return;
    }

    $('#btn-share-screen').hide();

    if(navigator.mediaDevices.getDisplayMedia) {
        navigator.mediaDevices.getDisplayMedia(screen_constraints).then(stream => {
            replaceScreenTrack(stream);
        }, error => {
            alert('Please make sure to use Edge 17 or higher.');
        });
    }
    else if(navigator.getDisplayMedia) {
        navigator.getDisplayMedia(screen_constraints).then(stream => {
            replaceScreenTrack(stream);
        }, error => {
            alert('Please make sure to use Edge 17 or higher.');
        });
    }
    else {
        alert('getDisplayMedia API is not available in this browser.');
    }
});
  
  </script>
</body>
</html>
